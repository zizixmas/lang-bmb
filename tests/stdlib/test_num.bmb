// Tests for core::num module
// Each test function verifies contracts are satisfied

use core::num::abs;
use core::num::min;
use core::num::max;
use core::num::clamp;
use core::num::sign;

// Test abs function
fn test_abs_positive() -> i64
  post ret == 42
= abs(42);

fn test_abs_negative() -> i64
  post ret == 42
= abs(-42);

fn test_abs_zero() -> i64
  post ret == 0
= abs(0);

// Test min function
fn test_min_first_smaller() -> i64
  post ret == 5
= min(5, 10);

fn test_min_second_smaller() -> i64
  post ret == 5
= min(10, 5);

fn test_min_equal() -> i64
  post ret == 7
= min(7, 7);

fn test_min_negative() -> i64
  post ret == -10
= min(-5, -10);

// Test max function
fn test_max_first_larger() -> i64
  post ret == 10
= max(10, 5);

fn test_max_second_larger() -> i64
  post ret == 10
= max(5, 10);

fn test_max_equal() -> i64
  post ret == 7
= max(7, 7);

// Test clamp function
fn test_clamp_in_range() -> i64
  post ret == 5
= clamp(5, 0, 10);

fn test_clamp_below() -> i64
  post ret == 0
= clamp(-5, 0, 10);

fn test_clamp_above() -> i64
  post ret == 10
= clamp(15, 0, 10);

fn test_clamp_at_min() -> i64
  post ret == 0
= clamp(0, 0, 10);

fn test_clamp_at_max() -> i64
  post ret == 10
= clamp(10, 0, 10);

// Test sign function
fn test_sign_positive() -> i64
  post ret == 1
= sign(42);

fn test_sign_negative() -> i64
  post ret == -1
= sign(-42);

fn test_sign_zero() -> i64
  post ret == 0
= sign(0);

// Composite tests
fn test_abs_min() -> i64
  post ret == 3
= min(abs(-5), abs(3));

fn test_clamp_abs() -> i64
  post ret == 10
= clamp(abs(-15), 0, 10);

// Main test runner
fn main() -> i64 =
    let t1 = test_abs_positive();
    let t2 = test_abs_negative();
    let t3 = test_min_first_smaller();
    let t4 = test_max_first_larger();
    let t5 = test_clamp_in_range();
    let t6 = test_sign_positive();
    // Return 0 for success
    0;
