// Sum of range using tail recursion
// Bootstrap compiler example: accumulator pattern

// Sum from 1 to n using tail recursion
fn sum_iter(n: i64, acc: i64) -> i64 =
    if n <= 0 { acc } else { sum_iter(n - 1, acc + n) };

// Wrapper function
fn sum(n: i64) -> i64 = sum_iter(n, 0);

// Sum of squares: 1^2 + 2^2 + ... + n^2
fn sum_squares_iter(n: i64, acc: i64) -> i64 =
    if n <= 0 { acc } else { sum_squares_iter(n - 1, acc + n * n) };

fn sum_squares(n: i64) -> i64 = sum_squares_iter(n, 0);

// Main function: sum(10) = 55, sum_squares(5) = 55
fn main() -> i64 =
    let s10 = sum(10);
    let u0 = println(s10);
    let sq5 = sum_squares(5);
    let u1 = println(sq5);
    0;
